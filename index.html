<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ä¸ƒå¤•æƒ…äººç¯€ï½œéº»ç³¬å¯¶å¯¶æˆ‘æ„›ä½ </title>

  <style>
    /* å–®ä¸€å­—é‡ï¼Œé¿å…ç²—ç´°ä¸ä¸€ */
    @font-face{
      font-family:"HandUnified";
      font-style:normal;
      font-weight:400;
      font-display:block;
      src:url("https://fonts.gstatic.com/s/mashanzheng/v16/NaPecZTIAOhVxoMyOr9n_E7fdMPmBA.woff2") format("woff2");
      unicode-range:U+0-7F,U+2E80-2EFF,U+3000-303F,U+31C0-31EF,U+3400-4DBF,U+4E00-9FFF,U+F900-FAFF,U+FE10-FE6F,U+FF00-FFEF;
    }

    :root{
      --paper:rgba(255,255,255,.88);
      --shadow:0 10px 26px rgba(0,0,0,.16);
      --r:18px;

      --hand:"HandUnified";
      --fz-body:clamp(18px,2.6vw,20px);
      --lh:2.05;
      --track:.02em;

      --album-bg:#3b2f2a; --album-ink:#f7f2ea;
      --tape-a:#e8d49b; --tape-b:#d7bf87;

      --env-stroke:#111; --env-pink:#ffd6ea;
      --env-paper:#fff7df; --env-heart:#ff6b7d;

      --gift-pink:#ffd6ea; --gift-red:#ff6b7d; --gift-dark:#222;
      --card:#fff7df;
    }

    *{ box-sizing:border-box }
    html,body{ height:100% }

    /* å…¨ç«™é–å®šå–®ä¸€æ‰‹å¯«å­—é«”èˆ‡å­—é‡ */
    .use-hand,
    html, body, .title, .msg, .text, .cap, .arrow, .paper, .album, .slides, .lottery {
      font-family:var(--hand),"Apple Color Emoji","Noto Color Emoji","Segoe UI Emoji" !important;
      font-weight:400 !important;
      font-style:normal !important;
      font-synthesis:none;
      font-kerning:none;
      font-variant-ligatures:none;
      font-feature-settings:"liga" 0,"clig" 0,"kern" 0;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      text-rendering:optimizeLegibility;
      paint-order:stroke fill;
      letter-spacing:var(--track);
      line-height:var(--lh);
    }
    html:not(.hand-ready) body{ visibility:hidden }

    body{
      margin:0; color:#2b2b2b; overflow-x:hidden; background:#000;
      -webkit-text-size-adjust:100%;
    }

    /* èƒŒæ™¯å±¤ç´šï¼šå½±ç‰‡0ã€è¦†è“‹1ã€èŠ±ç“£2ã€å…§å®¹3 */
    .bg-video{ position:fixed; inset:0; width:100vw; height:100vh; object-fit:cover; z-index:0; filter:brightness(.6) saturate(1.05) }
    @media (max-width:760px){ .bg-video{ filter:brightness(.6) } }
    .bg-overlay{ position:fixed; inset:0; z-index:1; pointer-events:none;
      background:
        radial-gradient(60% 60% at 50% 20%, rgba(255,182,206,.22) 0%, transparent 60%),
        linear-gradient(180deg, rgba(255,233,241,.28) 0%, rgba(255,233,241,.05) 40%, rgba(240,248,245,.08) 100%); }

    .petals{ position:fixed; inset:0; z-index:2; pointer-events:none; overflow:hidden }
    .petal{ position:absolute; top:-12vh; opacity:.9; width:24px; height:28px; background-size:100% 100%; background-repeat:no-repeat;
            animation:fall var(--fall,12s) linear infinite, sway var(--sway,3.6s) ease-in-out infinite alternate;
            will-change:transform,top; filter:drop-shadow(0 2px 2px rgba(0,0,0,.06)) }
    .petal.sakura{ background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'><defs><radialGradient id='p' cx='50%' cy='35%'><stop offset='0' stop-color='%23ffe2f0'/><stop offset='1' stop-color='%23ff80ab'/></radialGradient></defs><path d='M20 1 C33 10 33 30 20 39 C7 30 7 10 20 1 Z' fill='url(%23p)'/></svg>") }
    .petal.heart{  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'><path d='M20 35 C14 29 4 23 4 14 C4 8 8 5 12 5 c4 0 6 2 8 5 c2-3 4-5 8-5 c4 0 8 3 8 9 c0 9-10 15-16 21z' fill='%23e84a78'/></svg>") }
    @keyframes fall{ to{ top:110vh } }
    @keyframes sway{ 0%{ transform:translate3d(-12px,0,0) rotate(0) } 100%{ transform:translate3d(12px,0,0) rotate(360deg) } }
    @media (prefers-reduced-motion:reduce){ .petal{ display:none } }

    .wrap{ position:relative; z-index:3; padding:8vh 18px 16vh }
    .container{ max-width:1100px; margin:0 auto }

    /* ä¿¡å° */
    .hero{ margin:2vh auto 4vh; max-width:960px }
    .envelope{ position:relative; margin:8px auto 14px; width:min(860px,95vw); aspect-ratio:4/3; }
    .envelope .paper{
      position:absolute; top:-6%; left:11%; width:78%; height:66%;
      background:var(--env-paper); border:6px solid var(--env-stroke);
      box-shadow:0 12px 18px rgba(0,0,0,.2);
      transform:rotate(-7deg); z-index:3;
      padding:clamp(14px,3vw,22px) clamp(14px,3vw,24px);
      overflow:auto; border-radius:6px; -webkit-overflow-scrolling:touch; backface-visibility:hidden;
    }
    .envelope .paper h1{ margin:0 0 8px; font-size:clamp(26px,4.4vw,40px); font-weight:400 !important }
    .envelope .paper p{ margin:0; white-space:pre-line; font-size:var(--fz-body) }
    .paper .hint{ position:absolute; right:12px; bottom:10px; font-size:.9em; opacity:.7; user-select:none }

    .env-body{
      position:absolute; left:6%; right:6%; bottom:4%; height:58%;
      background:var(--env-pink); border:6px solid var(--env-stroke);
      border-bottom-left-radius:8px; border-bottom-right-radius:8px;
      box-shadow:0 10px 18px rgba(0,0,0,.2); z-index:1; pointer-events:none;
    }
    .env-flap{
      position:absolute; left:6%; right:6%; bottom:calc(4% + 58% - 6px); height:36%;
      overflow:visible; z-index:1; pointer-events:none;
    }
    .env-flap::before{
      content:""; position:absolute; inset:0; background:var(--env-pink);
      clip-path:polygon(50% 0, 100% 100%, 0 100%);
      box-shadow:0 8px 16px rgba(0,0,0,.14);
      border-top:6px solid var(--env-stroke); border-right:6px solid var(--env-stroke); border-left:6px solid var(--env-stroke);
    }
    .heart{ position:absolute; background:var(--env-heart); width:clamp(40px,7vw,64px); height:clamp(40px,7vw,64px);
            transform:rotate(45deg); box-shadow:0 6px 10px rgba(0,0,0,.16); z-index:1; border:6px solid var(--env-stroke); border-radius:8px; pointer-events:none }
    .heart::before,.heart::after{ content:""; position:absolute; width:100%; height:100%; background:var(--env-heart); border:6px solid var(--env-stroke); border-radius:50% }
    .heart::before{ left:-50% } .heart::after{ top:-50% }
    .h-big{ left:calc(50% - clamp(32px,6vw,52px)); bottom:calc(4% + 58% - clamp(22px,3vw,28px)); width:clamp(70px,10vw,92px); height:clamp(70px,10vw,92px) }
    .h-mid{ left:16%; bottom:calc(4% + 58% - 12px); transform:rotate(45deg) scale(.8) }
    .h-small{ left:10%; bottom:calc(4% + 58% + 26px); transform:rotate(45deg) scale(.6) }

    /* ç›¸ç°¿ */
    .album{
      position:relative; margin-top:24px; padding:24px; border-radius:20px;
      background:
        radial-gradient(1200px 800px at -10% -20%, rgba(255,255,255,.05) 0%, transparent 60%),
        radial-gradient(900px 600px at 110% 120%, rgba(255,255,255,.05) 0%, transparent 60%),
        linear-gradient(180deg,#46362c 0%,#332821 100%);
      background-color:var(--album-bg);
      box-shadow:inset 0 12px 28px rgba(0,0,0,.24), 0 8px 24px rgba(0,0,0,.18);
    }
    .slides{ position:relative; min-height:72vh }
    .slide{ position:absolute; inset:0; opacity:0; transform:translateX(24px) scale(.985); transition:opacity .33s ease, transform .33s ease; display:block }
    .slide.active{ opacity:1; transform:translateX(0) scale(1) }
    .page{ background:transparent; height:100%; display:grid; grid-template-columns:1fr min(360px,34%); gap:24px; align-items:center }
    .frame{ position:relative }
    .mat{ position:relative; background:#fff; padding:12px 12px 36px; border-radius:8px;
          box-shadow:0 14px 26px rgba(0,0,0,.28); transform:rotate(-1.2deg) }
    .slide:nth-child(even) .mat{ transform:rotate(.9deg) }
    .mat::before, .mat span.tape{
      content:""; position:absolute; width:96px; height:24px; background:linear-gradient(180deg,var(--tape-a),var(--tape-b));
      opacity:.9; mix-blend-mode:multiply; box-shadow:0 4px 8px rgba(0,0,0,.14);
      clip-path:polygon(3% 0,97% 0,100% 20%,97% 100%,3% 100%,0 80%); pointer-events:none;
    }
    .mat::before{ left:-10px; top:-12px; transform:rotate(-12deg) }
    .mat span.tape{ right:-8px; bottom:-10px; transform:rotate(10deg) }

    .media{ width:100%; max-height:58vh; aspect-ratio:3/4; object-fit:cover; border-radius:6px; box-shadow:0 8px 16px rgba(0,0,0,.16); display:block }
    video.media{ aspect-ratio:auto; max-height:58vh; border-radius:6px; background:#000 }
    .text{ align-self:center; padding:8px 4px; color:var(--album-ink) }
    .text h3{ margin:0; font-size:var(--fz-body); line-height:var(--lh) }

    .arrow{ position:absolute; top:0; bottom:0; width:13%; display:flex; align-items:center; justify-content:center; color:#fff; cursor:pointer; z-index:3; user-select:none; }
    .arrow svg{ width:40px; height:40px; filter:drop-shadow(0 4px 10px rgba(0,0,0,.35)) }
    .arrow-left{ left:-6px; background:linear-gradient(90deg, rgba(0,0,0,.18), transparent) }
    .arrow-right{ right:-6px; background:linear-gradient(270deg, rgba(0,0,0,.18), transparent) }
    .arrow:active{ transform:scale(.98) }

    @media (max-width:760px){
      .album{ padding:18px }
      .page{ grid-template-columns:1fr; gap:14px }
      .media{ max-height:56vh }
      .arrow{ width:16% }
      .text{ text-align:center }
      .envelope .paper{ transform:rotate(-4deg) }
    }

    /* ç ´åœ–å ä½ */
    .media.broken{
      background:center/48% no-repeat url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'><rect width='200' height='200' rx='12' fill='%23f2f2f2'/><path d='M30 140l38-42 28 28 36-46 38 60H30z' fill='%23c8c8c8'/><circle cx='76' cy='78' r='10' fill='%23c8c8c8'/></svg>");
      min-height:220px;
    }

    /* æŠ½ç */
    .lottery{ margin:32px auto 0; max-width:960px; }
    .lottery .card{ margin:0 18px; padding:22px 18px; background:var(--paper); border-radius:var(--r); box-shadow:var(--shadow); text-align:center; color:#2b2b2b }
    .lottery h2{ margin:0 0 6px; font-size:clamp(22px,4vw,30px) }
    .lottery .note{ margin:0 0 10px; font-size:var(--fz-body) }
    .gift{ margin:12px auto; width:min(360px,78vw); height:min(300px,64vw); position:relative; cursor:pointer; user-select:none; display:grid; place-items:center }
    .gift .box{ width:78%; height:48%; background:var(--gift-pink); border:6px solid var(--gift-dark); border-radius:10px; position:absolute; bottom:10% }
    .gift .lid{ width:85%; height:26%; background:var(--gift-pink); border:6px solid var(--gift-dark); border-bottom-width:8px; border-radius:12px; position:absolute; bottom:58%;
               transform-origin:20% 120%; transition:transform .45s ease, translate .45s ease }
    .gift .ribbon{ position:absolute; width:10%; height:85%; background:var(--gift-red); left:50%; translate:-50% 0; bottom:8%; border-radius:6px; box-shadow:0 0 0 6px var(--gift-red) inset }
    .gift.open .lid{ transform:rotate(-28deg) translate(-14px,-40px) }
    .gift.open .spark{ opacity:1; transform:translateY(0) scale(1) }
    .spark{ position:absolute; top:8%; left:50%; translate:-50% -20px; display:flex; gap:10px; opacity:0; transform:translateY(10px) scale(.9); transition:.45s ease }
    .spark span{ width:22px; height:22px; transform:rotate(45deg); background:var(--gift-red); border:4px solid var(--gift-dark); border-radius:6px }
    .spark span::before,.spark span::after{ content:""; position:absolute; width:22px; height:22px; border-radius:50%; background:var(--gift-red); border:4px solid var(--gift-dark) }
    .spark span::before{ top:-50% } .spark span::after{ left:-50% }
    .prize{ margin-top:10px }
    .prize .paper{ display:inline-block; padding:14px 16px; background:var(--card); border:4px solid var(--gift-dark); border-radius:8px; box-shadow:0 8px 14px rgba(0,0,0,.16) }
    .prize .result{ margin:0 0 8px; font-size:var(--fz-body) }
    .btn{ border:none; background:var(--gift-red); color:#fff; padding:8px 14px; border-radius:999px; font-size:var(--fz-body); box-shadow:0 6px 12px rgba(0,0,0,.18); cursor:pointer }
    .btn:active{ transform:translateY(1px) }

    /* å¿ƒå¿ƒç…™ç«ï¼ˆåŠ é€Ÿï¼‰ */
    .heart-splash{ position:absolute; pointer-events:none; width:18px; height:18px; background:var(--env-heart); transform:rotate(45deg); border-radius:4px; filter:drop-shadow(0 2px 4px rgba(0,0,0,.2)); animation:floatUp .9s ease-out forwards }
    .heart-splash::before,.heart-splash::after{ content:""; position:absolute; width:18px; height:18px; background:var(--env-heart); border-radius:50% }
    .heart-splash::before{ left:-50% } .heart-splash::after{ top:-50% }
    @keyframes floatUp{ to{ transform:translateY(-120px) rotate(45deg); opacity:0 } }
  </style>
</head>
<body class="use-hand">

  <!-- èƒŒæ™¯å½±ç‰‡ï¼ˆæ ¹ç›®éŒ„ï¼‰ -->
  <video class="bg-video" autoplay muted loop playsinline webkit-playsinline poster="IMG_3454.JPG"
         data-sources='["couple_h264.mp4","couple.webm"]'>
    æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´å½±ç‰‡æ’­æ”¾ã€‚
  </video>
  <div class="bg-overlay" aria-hidden="true"></div>

  <!-- èŠ±ç“£/æ„›å¿ƒç‘è½ -->
  <div class="petals" aria-hidden="true"></div>

  <main class="wrap">
    <div class="container">

      <!-- ä¿¡å°åœ¨å¾Œã€ä¿¡ç´™åœ¨å‰ -->
      <section class="hero" aria-label="æƒ…äººç¯€ä¿¡å°å¡ç‰‡">
        <div class="envelope">
          <div class="paper">
            <h1>ä¸ƒå¤•æƒ…äººç¯€</h1>
            <p>æƒ…äººç¯€å¿«æ¨‚ï¼Œéº»ç³¬å¯¶å¯¶
èƒ½æˆç‚ºä½ çš„å¥³æœ‹å‹ï¼ŒçœŸçš„å¥½å¹¸é‹ğŸ’•
æ›´å¹¸é‹çš„æ˜¯åœ¨ä»Šå¹´èˆ‡ä½ ç›¸é‡å–”~é›–ç„¶æˆ‘åœ¨æ„Ÿæƒ…æ–¹é¢æœ‰äº›è¨±åœ°æ–¹å°å°å¹¼ç¨š(å“ˆå“ˆå“ˆå¯¶å¯¶å…¶å¯¦ä¹Ÿæ˜¯å•¦)
ä½†ä½ ç¸½æ˜¯å¾ˆæœ‰è€å¿ƒåœ°å®‰æ’«æˆ‘ã€åŒ…å®¹æˆ‘
è¬è¬ä½ çš„æ„›ã€é«”è²¼ã€æ²‰ç©©ï¼Œçµ¦æˆ‘æ»¿æ»¿çš„å®‰å…¨æ„Ÿ(æˆ‘çš„å°ˆå±¬éº»ç³¬+è–©æ‘©è€¶)
æˆ‘å€‘åœ¨æ„çš„æ±è¥¿çœŸçš„å¾ˆåƒï¼Œæ‰€ä»¥ç„¡è«–éå»ã€ç¾åœ¨ã€æœªä¾†éƒ½ä¸ç”¨æ“”å¿ƒä½ æå‡ºä¸èˆ’æœçš„é»æˆ‘æœƒè¦ºå¾—æ€éº¼æ¨£~
ä¹‹å¾Œçš„è·¯ï¼Œä¸ç®¡ç™¼ç”Ÿä»€éº¼äº‹æƒ…ï¼Œéƒ½è¦ä¸€èµ·é™ªè‘—å½¼æ­¤èµ°åˆ°å¾ˆé å¾ˆé ã€èµ°åˆ°æ°¸é å–”~~
æˆ‘çœŸçš„è¶…ç´šä¸–ç•Œç„¡æ•µéœ¹é‚æ„›ä½  â¤ï¸ ğŸ’–</p>
            <div class="hint">â¬†â¬‡ å¯æ»‘å‹•</div>
          </div>

          <div class="env-body" aria-hidden="true"></div>
          <div class="env-flap" aria-hidden="true"></div>
          <span class="heart h-small" aria-hidden="true"></span>
          <span class="heart h-mid" aria-hidden="true"></span>
          <span class="heart h-big" aria-hidden="true"></span>
        </div>
      </section>

      <!-- ç›¸ç°¿ -->
      <section class="album" aria-label="å›æ†¶ç›¸ç°¿ï¼Œå¯å·¦å³ç¿»é ">
        <div class="arrow arrow-left" id="prev" aria-label="ä¸Šä¸€å¼µ" title="ä¸Šä¸€å¼µ">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
        </div>
        <div class="arrow arrow-right" id="next" aria-label="ä¸‹ä¸€å¼µ" title="ä¸‹ä¸€å¼µ">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="m8.59 16.59 1.41 1.41 6-6-6-6-1.41 1.41L13.17 12z"/></svg>
        </div>

        <div class="slides" id="slides">
          <article class="slide active">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="ç¬¬ä¸€å¼µ.JPG" alt="æ›–æ˜§æ™‚æœŸæ‰‹æ‰‹"></div></div>
              <div class="text"><h3>æ›–æ˜§çš„æ™‚å€™éƒ½æœƒçµ¦æˆ‘çœ‹æ‰‹æ‰‹</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="ç¬¬äºŒå¼µ.jpg" alt="ä¸€èµ·è¿½å¤ªé™½çœ‹æ—¥å‡º"></div></div>
              <div class="text"><h3>ä¸€èµ·è¿½å¤ªé™½çœ‹æ—¥å‡ºï¼ˆå¥½æµªæ¼«</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="ç¬¬ä¸‰å¼µ.JPG" alt="æ‹æ‹è²¼æ©Ÿ"></div></div>
              <div class="text"><h3>ä¸€èµ·æ‹æ‹è²¼æ©Ÿ</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="ç¬¬å››å¼µ.jpg" alt="520 ç«ç‘°èŠ±"></div></div>
              <div class="text"><h3>520 æœ‰äººé€äº†ä¸€æŸç«ç‘°èŠ±ï¼ˆæœ‰å„€å¼æ„Ÿã€æµªæ¼«çš„ç”·äºº</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="ç¬¬äº”å¼µ.jpg" alt="æ—¥å¸¸é€› IKEA"></div></div>
              <div class="text"><h3>æ—¥å¸¸ç´„æœƒ é€› IKEAï½œç”œèœœå–®ç´”çš„ç”Ÿæ´»</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="ç¬¬å…­å¼µ.JPG" alt="å°å—éŠ å·æ‹å¯¶å¯¶"></div></div>
              <div class="text"><h3>å°å—éŠï½œå·æ‹å¯¶å¯¶</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="ç¬¬ä¸ƒå¼µ.jpg" alt="å¯å¯æ„›æ„›çš„åºŠç…§"></div></div>
              <div class="text"><h3>å¯å¯æ„›æ„›çš„åºŠç…§</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="ç¬¬å…«å¼µ.JPG" alt="åˆ°å“ªéƒ½è¦é€›æ•é ­"></div></div>
              <div class="text"><h3>åˆ°å“ªéƒ½è¦é€›æ•é ­çš„å¯¶å¯¶</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span>
                <video class="media" muted playsinline webkit-playsinline controls preload="metadata"
                       data-sources='["couple2_h264.mp4","couple2.webm"]'>æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´å½±ç‰‡æ’­æ”¾ã€‚</video>
              </div></div>
              <div class="text"><h3>å¯¶å¯¶è€å¯æ„›æ—¥å¸¸</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="IMG_3412.JPG" alt="è¿‘æœŸï¼šå¥³å‹è¦–è§’"></div></div>
              <div class="text"><h3>è¿‘æœŸç…§ç‰‡ï¼šå¥³å‹è¦–è§’</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="IMG_3419.JPG" alt="è¿‘æœŸï¼šç”·å‹è¦–è§’"></div></div>
              <div class="text"><h3>è¿‘æœŸç…§ç‰‡ï¼šç”·å‹è¦–è§’</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="IMG_3454.JPG" alt="åˆæ˜¯ä¸éŒ¯çœ‹çš„åˆç…§"></div></div>
              <div class="text"><h3>åˆæ˜¯ä¸éŒ¯çœ‹çš„ä¸€å¼µå°é¡æ‹</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="ç¬¬ä¹å¼µ-JPG.jpg" alt="ä¸ƒå¤•ç«ç‘°"></div></div>
              <div class="text"><h3>ä¸ƒå¤•å¯¶å¯¶æå‰æº–å‚™çš„ç«ç‘°èŠ±å•Šå•Šå•Š</h3></div>
            </div>
          </article>

          <article class="slide">
            <div class="page">
              <div class="frame"><div class="mat"><span class="tape"></span><img class="media" loading="lazy" src="ç¬¬åå¼µ.jpg" alt="å·§å…‹åŠ›"></div></div>
              <div class="text"><h3>é‚„æœ‰ä¸€ç›’å·§å…‹åŠ› â¤ï¸</h3></div>
            </div>
          </article>
        </div>
      </section>

      <!-- æŠ½ç -->
      <section class="lottery" aria-label="æŠ½ç¦®ç‰©">
        <div class="card">
          <h2>æŠ½ç¦®ç‰© ğŸ</h2>
          <p class="note">é»æ“Šç¦®ç‰©ç›’é–‹ç®±ï½æœ‰ <b>å¤§ç</b> èˆ‡ <b>å°ç</b> éš¨æ©Ÿå‡ºç¾</p>

          <div class="gift" id="gift" title="é»æˆ‘æŠ½ç">
            <div class="spark"><span></span><span></span><span></span></div>
            <div class="lid"></div>
            <div class="box"></div>
            <div class="ribbon"></div>
          </div>

          <div class="prize">
            <div class="paper">
              <p class="result" id="result">æº–å‚™å¥½äº†å—ï¼Ÿé»ç¦®ç‰©ç›’æŠ½çï¼</p>
              <button class="btn" id="again" type="button" disabled>å†æŠ½ä¸€æ¬¡</button>
            </div>
          </div>
        </div>
      </section>

    </div>
  </main>

  <script>
    /* å­—å‹è¼‰å…¥å®Œæˆå†é¡¯ç¤º */
    document.fonts?.ready.then(()=>document.documentElement.classList.add('hand-ready'));

    /* è½èŠ±ï¼šæ‰‹æ©Ÿæ¸›é‡ä»¥æå‡æ•ˆèƒ½ */
    const isMobile = matchMedia('(max-width: 760px)').matches;
    const sak = isMobile ? 16 : 36;
    const hearts = isMobile ? 10 : 20;
    const layer = document.querySelector('.petals');
    function drop(type, count){
      for(let i=0;i<count;i++){
        const el=document.createElement('span');
        el.className='petal '+type;
        const size=12+Math.random()*18;
        el.style.width=size+'px'; el.style.height=size*1.2+'px';
        el.style.left=(Math.random()*100)+'vw';
        el.style.opacity=0.78+Math.random()*0.22;
        const fall=9+Math.random()*9, sway=2.2+Math.random()*3.2;
        el.style.setProperty('--fall', fall+'s'); el.style.setProperty('--sway', sway+'s');
        el.style.animationDelay=(-Math.random()*fall)+'s, '+(-Math.random()*sway)+'s';
        layer.appendChild(el);
      }
    }
    drop('sakura', sak); drop('heart', hearts);

    /* ç›¸ç°¿ç¿»é ï¼ˆæ›´å¿«çš„è½‰å ´ï¼‰ */
    const slides=[...document.querySelectorAll('.slide')];
    let i=0;
    function go(n){
      slides[i].classList.remove('active');
      i=(n+slides.length)%slides.length;
      slides[i].classList.add('active');
    }
    document.getElementById('prev').onclick=()=>go(i-1);
    document.getElementById('next').onclick=()=>go(i+1);
    document.addEventListener('keydown',e=>{
      if(e.key==='ArrowLeft') go(i-1);
      if(e.key==='ArrowRight') go(i+1);
    },{passive:true});

    /* è§¸æ§æ»‘å‹• */
    let sx=0, dx=0; const area=document.getElementById('slides');
    area.addEventListener('touchstart',e=>sx=e.touches[0].clientX,{passive:true});
    area.addEventListener('touchmove', e=>dx=e.touches[0].clientX-sx,{passive:true});
    area.addEventListener('touchend',  ()=>{ if(Math.abs(dx)>40){ dx>0?go(i-1):go(i+1) } dx=0; },{passive:true});

    /* åœ–ç‰‡å®¹éŒ¯è¼‰å…¥ï¼šå¤§å°å¯« / ç·¨ç¢¼ / å¸¸è¦‹å‰¯æª”å */
    document.querySelectorAll('img.media').forEach(img=>{
      const orig=img.getAttribute('src')||"";
      const ext=(orig.match(/\.\w+$/)||[""])[0];
      const arr=[orig];
      if(ext) arr.push(orig.replace(/\.\w+$/,m=>m===m.toLowerCase()?m.toUpperCase():m.toLowerCase()));
      const base=ext?orig.replace(/\.\w+$/,""):orig;
      [".jpg",".JPG",".jpeg",".png",".webp"].forEach(e=>arr.push(base+e));
      arr.push(encodeURI(orig)); if(ext) arr.push(encodeURI(base)+ext); arr.push(orig.replace(/\s/g,"%20"));
      const list=[...new Set(arr)].filter(Boolean);
      let k=0;
      function tryNext(){
        if(k>=list.length){ img.classList.add('broken'); return; }
        const url=list[k++], probe=new Image();
        probe.onload=()=>img.src=url; probe.onerror=tryNext; probe.src=url;
      }
      img.addEventListener('error',tryNext,{once:true});
      if(img.complete && img.naturalWidth===0) tryNext();
    });

    /* å½±ç‰‡å®¹éŒ¯è¼‰å…¥ï¼šé€ä¸€è©¦æ’­ + å¤§å°å¯«/ç·¨ç¢¼è®Šé«” + è‡ªå‹•æ’­æ”¾è§£é– */
    function canPlay(type){
      const v=document.createElement('video');
      return !!v.canPlayType && v.canPlayType(type).replace(/no/,'');
    }
    function candidatesFrom(src){
      const ext=(src.match(/\.\w+$/)||[""])[0], out=[src];
      if(ext) out.push(src.replace(/\.\w+$/,m=>m===m.toLowerCase()?m.toUpperCase():m.toLowerCase()));
      out.push(encodeURI(src)); if(ext) out.push(encodeURI(src.replace(/\.\w+$/,""))+ext);
      out.push(src.replace(/\s/g,"%20"));
      return [...new Set(out)];
    }
    function initVideo(v){
      const data=v.getAttribute('data-sources');
      const raw = data ? (()=>{ try { return JSON.parse(data) } catch { return [] } })() : [];
      const mp4=raw.filter(s=>/\.mp4(\?|$)/i.test(s));
      const webm=raw.filter(s=>/\.webm(\?|$)/i.test(s));
      const order=(canPlay('video/mp4')?mp4:[]).concat(canPlay('video/webm')?webm:[]).concat(raw);
      const list=[...new Set(order.flatMap(candidatesFrom))];

      let idx=0;
      function tryNext(){
        if(idx>=list.length){ console.warn('å½±ç‰‡çš†ç„¡æ³•æ’­æ”¾ï¼š',list); return; }
        const url=list[idx++];
        v.src=url; v.load();
        const timer=setTimeout(()=>{ if(v.readyState<2) tryNext(); }, 2000);
        v.addEventListener('loadeddata',()=>{ clearTimeout(timer); v.play().catch(()=>{}); },{once:true});
        v.addEventListener('error',tryNext,{once:true});
      }
      tryNext();
    }
    const bg=document.querySelector('.bg-video'); initVideo(bg);
    document.querySelectorAll('video.media').forEach(initVideo);

    /* ä½¿ç”¨è€…é¦–æ¬¡äº’å‹•å¾Œå†è£œä¸€æ¬¡ play()ï¼ˆiOS/Android æ”¿ç­–ï¼‰ */
    const resumeAll=()=>{ [bg,...document.querySelectorAll('video.media')].forEach(v=>v&&v.play&&v.play().catch(()=>{})); };
    window.addEventListener('touchstart',resumeAll,{once:true,passive:true});
    window.addEventListener('click',resumeAll,{once:true,passive:true});

    /* æŠ½ç */
    const gift=document.getElementById('gift');
    const result=document.getElementById('result');
    const again=document.getElementById('again');
    const GRAND=["å¤§ç ğŸ "];
    const SMALL=["å°ç ğŸ "];
    const pick=arr=>arr[Math.floor(Math.random()*arr.length)];
    function heartSplash(){
      const host=gift, rect=host.getBoundingClientRect();
      const cx=rect.width/2, cy=rect.height*0.35;
      const n=10; for(let i=0;i<n;i++){
        const h=document.createElement('span'); h.className='heart-splash';
        h.style.left=(cx+(Math.random()*120-60))+'px';
        h.style.top =(cy+(Math.random()*20-10))+'px';
        h.style.opacity=.9; h.style.animationDelay=(Math.random()*0.2)+'s';
        host.appendChild(h); setTimeout(()=>h.remove(), 950);
      }
    }
    function drawPrize(){
      const big=Math.random()<0.5;
      result.textContent=big?pick(GRAND):pick(SMALL);
      gift.classList.add('open'); again.disabled=false; heartSplash();
    }
    gift.addEventListener('click',()=>{ if(!gift.classList.contains('open')) drawPrize(); });
    again.addEventListener('click',()=>{ gift.classList.remove('open'); result.textContent="æº–å‚™å¥½äº†å—ï¼Ÿé»ç¦®ç‰©ç›’å†æŠ½ä¸€æ¬¡ï¼"; again.disabled=true; });
  </script>
</body>
</html>







